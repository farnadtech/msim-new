# ๐ ุฑุงูููุง ุงุณุชูุฑุงุฑ ูพุฑูฺู ุฑู msim724.com

## ูุฑุญูู 1: ุขูุงุฏูโุณุงุฒ ฺฉุฏ ุจุฑุง Production

### 1.1 ุชูุธูุงุช ูุญุท (.env)
ูุงู `.env` ุฑุง ุจุฑุง production ูุฑุงุด ฺฉูุฏ:

```env
# Supabase Configuration
VITE_SUPABASE_URL=your_production_supabase_url
VITE_SUPABASE_ANON_KEY=your_production_supabase_anon_key

# SMS Service Configuration
VITE_MELIPAYAMAK_USERNAME=your_username
VITE_MELIPAYAMAK_PASSWORD=your_password
VITE_MELIPAYAMAK_OTP_PATTERN_ID=your_otp_pattern_id
VITE_MELIPAYAMAK_ACTIVATION_PATTERN_ID=your_activation_pattern_id

# Payment Gateway Callback URL
VITE_ZIBAL_CALLBACK_URL=https://msim724.com/zibal-callback.html
```

### 1.2 ุชูุธูุงุช ุฏุฑฺฏุงู ุฒุจุงู
ุฏุฑ ูพูู ุฒุจุงู (gateway.zibal.ir):
1. ูุงุฑุฏ ูพูู ุดูุฏ
2. ุจู ุจุฎุด "ุชูุธูุงุช" ุจุฑูุฏ
3. URL ุจุงุฒฺฏุดุช (Callback URL) ุฑุง ุชูุธู ฺฉูุฏ:
   ```
   https://msim724.com/zibal-callback.html
   ```
4. Merchant ID ุฎูุฏ ุฑุง ุงุฏุฏุงุดุช ฺฉูุฏ

### 1.3 ุชูุธูุงุช ุฏุฑ ุฏุชุงุจุณ
ุฏุฑ Supabase SQL Editor ุงู ฺฉูุฆุฑโูุง ุฑุง ุงุฌุฑุง ฺฉูุฏ:

```sql
-- ุชูุธู Merchant ID ูุงูุน ุฒุจุงู
UPDATE payment_gateway_settings 
SET merchant_id = 'YOUR_REAL_MERCHANT_ID'
WHERE gateway_name = 'zibal';

-- ุบุฑูุนุงู ฺฉุฑุฏู ุญุงูุช sandbox
UPDATE payment_gateway_settings 
SET sandbox = false
WHERE gateway_name = 'zibal';

-- ูุนุงู ฺฉุฑุฏู ุฏุฑฺฏุงู
UPDATE payment_gateway_settings 
SET enabled = true
WHERE gateway_name = 'zibal';
```

## ูุฑุญูู 2: Build ู ุขูุงุฏูโุณุงุฒ ูุงูโูุง

```bash
cd msim-new
npm run build
```

ูุงูโูุง build ุดุฏู ุฏุฑ ูพูุดู `dist` ูุฑุงุฑ ูโฺฏุฑูุฏ.

## ูุฑุญูู 3: ุขูพููุฏ ูุงูโูุง

### ุฑูุด 1: ุงุณุชูุงุฏู ุงุฒ Git
```bash
# ุงุถุงูู ฺฉุฑุฏู ุชุบุฑุงุช
git add .

# Commit
git commit -m "Production ready - Fixed payment gateway and commissions"

# Push ุจู GitHub
git push origin main
```

### ุฑูุด 2: ุขูพููุฏ ูุณุชูู
ูุงูโูุง ุฏุงุฎู ูพูุดู `dist` ุฑุง ุจู ุณุฑูุฑ ุขูพููุฏ ฺฉูุฏ.

## ูุฑุญูู 4: ุชูุธูุงุช ุณุฑูุฑ

### 4.1 ูุงู zibal-callback.html
ูุทูุฆู ุดูุฏ ฺฉู ูุงู `public/zibal-callback.html` ุฏุฑ root ุฏุงููู ูุงุจู ุฏุณุชุฑุณ ุงุณุช:
```
https://msim724.com/zibal-callback.html
```

### 4.2 ุชูุธูุงุช HTTPS
ูุทูุฆู ุดูุฏ ฺฉู:
- SSL/TLS ูุนุงู ุงุณุช
- ุฏุงููู ุจุง HTTPS ฺฉุงุฑ ูโฺฉูุฏ
- Redirect ุงุฒ HTTP ุจู HTTPS ูุนุงู ุงุณุช

### 4.3 ุชูุธูุงุช CORS (ุฏุฑ Supabase)
ุฏุฑ Supabase Dashboard:
1. Settings โ API
2. CORS Allowed Origins ุฑุง ุชูุธู ฺฉูุฏ:
   ```
   https://msim724.com
   ```

## ูุฑุญูู 5: ุชุณุช ููุง

### 5.1 ุชุณุช ุฏุฑฺฏุงู ูพุฑุฏุงุฎุช
1. ูุงุฑุฏ ุณุงุช ุดูุฏ: https://msim724.com
2. ุจู ฺฉู ูพูู ุจุฑูุฏ
3. ูุจูุบ ฺฉู (ูุซูุงู 10,000 ุชููุงู) ุดุงุฑฺ ฺฉูุฏ
4. ุจุฑุฑุณ ฺฉูุฏ:
   - โ ุจู ุฏุฑฺฏุงู ุฒุจุงู ููุชูู ูโุดูุฏ
   - โ ูุจูุบ ุตุญุญ ููุงุด ุฏุงุฏู ูโุดูุฏ (ุจู ุฑุงู)
   - โ ุจุนุฏ ุงุฒ ูพุฑุฏุงุฎุช ุจู ุณุงุช ุจุฑูโฺฏุฑุฏุฏ
   - โ ููุฌูุฏ ฺฉู ูพูู ุจูโุฑูุฒ ูโุดูุฏ

### 5.2 ุชุณุช ุฎุฑุฏ ู ูุฑูุด
1. ฺฉ ุณูโฺฉุงุฑุช ุจุฎุฑุฏ
2. ุจุฑุฑุณ ฺฉูุฏ:
   - โ ุณูุงุฑุด ุซุจุช ูโุดูุฏ
   - โ ูพูู ุงุฒ ฺฉู ูพูู ฺฉุณุฑ ูโุดูุฏ
   - โ ูุฑูุดูุฏู ฺฉุฏ ูุนุงูโุณุงุฒ ุงุฑุณุงู ูโฺฉูุฏ
   - โ ฺฉูุณูู ุฏุฑ ูพูู ุงุฏูู ุซุจุช ูโุดูุฏ

### 5.3 ุชุณุช ฺฉูุณููโูุง
1. ูุงุฑุฏ ูพูู ุงุฏูู ุดูุฏ
2. ุจู ุจุฎุด "ฺฏุฒุงุฑุด ฺฉูุณููโูุง" ุจุฑูุฏ
3. ุจุฑุฑุณ ฺฉูุฏ:
   - โ ููู ฺฉูุณููโูุง ููุงุด ุฏุงุฏู ูโุดููุฏ
   - โ ูุจุงูุบ ุตุญุญ ูุณุชูุฏ

## ูุฑุญูู 6: ุงุฌุฑุง ุงุณฺฉุฑูพุชโูุง ุฏุชุงุจุณ

ุฏุฑ Supabase SQL Editor ุงู ุงุณฺฉุฑูพุชโูุง ุฑุง ุจู ุชุฑุชุจ ุงุฌุฑุง ฺฉูุฏ:

### 6.1 ุบุฑูุนุงู ฺฉุฑุฏู RLS ุจุฑุง commissions
```sql
ALTER TABLE commissions DISABLE ROW LEVEL SECURITY;
```

### 6.2 ุงุฌุงุฏ ฺฉูุณููโูุง ฺฏุฐุดุชู
ูุงู `supabase/populate-missing-commissions.sql` ุฑุง ุงุฌุฑุง ฺฉูุฏ.

### 6.3 ุจุฑุฑุณ ููุง
```sql
-- ุชุนุฏุงุฏ ฺฉูุณููโูุง
SELECT COUNT(*) FROM commissions;

-- ุชุนุฏุงุฏ ุณูุงุฑุดุงุช completed
SELECT COUNT(*) FROM purchase_orders WHERE status = 'completed';

-- ุขุฎุฑู ฺฉูุณููโูุง
SELECT * FROM commissions ORDER BY created_at DESC LIMIT 10;
```

## ฺฺฉโูุณุช ููุง

- [ ] ูุงู `.env` ุจุฑุง production ุชูุธู ุดุฏู
- [ ] Callback URL ุฏุฑ ูพูู ุฒุจุงู ุชูุธู ุดุฏู
- [ ] Merchant ID ูุงูุน ุฏุฑ ุฏุชุงุจุณ ุซุจุช ุดุฏู
- [ ] Sandbox mode ุบุฑูุนุงู ุดุฏู
- [ ] Build ฺฏุฑูุชู ุดุฏู (`npm run build`)
- [ ] ูุงูโูุง ุขูพููุฏ ุดุฏู
- [ ] HTTPS ูุนุงู ุงุณุช
- [ ] CORS ุฏุฑ Supabase ุชูุธู ุดุฏู
- [ ] ูุงู `zibal-callback.html` ูุงุจู ุฏุณุชุฑุณ ุงุณุช
- [ ] RLS ุจุฑุง commissions ุบุฑูุนุงู ุดุฏู
- [ ] ฺฉูุณููโูุง ฺฏุฐุดุชู ุงุฌุงุฏ ุดุฏู
- [ ] ุชุณุช ูพุฑุฏุงุฎุช ุงูุฌุงู ุดุฏู
- [ ] ุชุณุช ุฎุฑุฏ ู ูุฑูุด ุงูุฌุงู ุดุฏู

## ูฺฉุงุช ููู

### ุงููุช
- ูุฑฺฏุฒ ูุงู `.env` ุฑุง commit ูฺฉูุฏ
- Service Role Key ุฑุง ููุท ุฏุฑ ุณุฑูุฑ ุงุณุชูุงุฏู ฺฉูุฏ
- HTTPS ุฑุง ููุดู ูุนุงู ูฺฏู ุฏุงุฑุฏ

### ูพุดุชุจุงู
- ูุงฺฏโูุง ฺฉูุณูู ูุฑูุฑฺฏุฑ ุฑุง ุจุฑุฑุณ ฺฉูุฏ
- ูุงฺฏโูุง Supabase ุฑุง ฺฺฉ ฺฉูุฏ
- ุฏุฑ ุตูุฑุช ูุดฺฉูุ sandbox mode ุฑุง ูุนุงู ฺฉูุฏ

### ูุงูุชูุฑูฺฏ
- ุชุฑุงฺฉูุดโูุง ูพุฑุฏุงุฎุช ุฑุง ุฑูุฒุงูู ุจุฑุฑุณ ฺฉูุฏ
- ฺฉูุณููโูุง ุฑุง ููุชฺฏ ฺฺฉ ฺฉูุฏ
- ฺฏุฒุงุฑุดโูุง ุฎุทุง ุฑุง ูพฺฏุฑ ฺฉูุฏ

## ูพุดุชุจุงู

ุฏุฑ ุตูุฑุช ุจุฑูุฒ ูุดฺฉู:
1. ูุงฺฏโูุง ฺฉูุณูู ุฑุง ุจุฑุฑุณ ฺฉูุฏ
2. Network tab ุฑุง ฺฺฉ ฺฉูุฏ
3. Supabase logs ุฑุง ุจุจูุฏ
4. ุจุง ูพุดุชุจุงู ุฒุจุงู ุชูุงุณ ุจฺฏุฑุฏ

## ุชุบุฑุงุช ุงุฎุฑ

### ูุณุฎู ูุนู
- โ ุฑูุน ูุดฺฉู ุชุจุฏู ุชููุงู ุจู ุฑุงู
- โ ุฑูุน ูุดฺฉู "previously verified"
- โ ุฑูุน ูุดฺฉู ููุงุด ฺฉุฏ ูุนุงูโุณุงุฒ
- โ ุงุถุงูู ุดุฏู ูุงุจูุช ุฑุณุช ฺฉุฏ ููฺฏุงู ฺฏุฒุงุฑุด ูุดฺฉู
- โ ุฑูุน ูุดฺฉู ุซุจุช ฺฉูุณููโูุง
- โ ุญุฐู ุงุฑูุฑูุง auction_details
- โ ุจูุจูุฏ UI ู UX

ูููู ุจุงุดุฏ! ๐
