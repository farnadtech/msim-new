# ูพุงุฏูโุณุงุฒ ุชุญูู ูุฒฺฉ ุณูฺฉุงุฑุช

## ุชุบุฑุงุช ุงูุฌุงู ุดุฏู

### 1. ูพุงฺฏุงู ุฏุงุฏู (Database)
ูุงู: `supabase/add-delivery-address-fields.sql`

ููุฏูุง ุฒุฑ ุจู ุฌุฏูู `activation_requests` ุงุถุงูู ุดุฏ:
- `delivery_method`: ูุญูู ุชุญูู (activation_code ุง physical_card)
- `delivery_address`: ุขุฏุฑุณ ฺฉุงูู ุฎุฑุฏุงุฑ
- `delivery_city`: ุดูุฑ
- `delivery_postal_code`: ฺฉุฏ ูพุณุช
- `buyer_phone`: ุดูุงุฑู ุชูุงุณ ุฎุฑุฏุงุฑ

### 2. ุณุฑูุณ API
ูุงู: `services/api-supabase.ts`

ุชุงุจุน `createActivationRequest` ุจูโุฑูุฒุฑุณุงู ุดุฏ:
- ูพุงุฑุงูุชุฑูุง ุฌุฏุฏ: `deliveryMethod` ู `deliveryAddress`
- ุฐุฎุฑู ุงุทูุงุนุงุช ุขุฏุฑุณ ุฏุฑ ุฏุชุงุจุณ
- ุงุฑุณุงู ููุชูฺฉุดู ููุงุณุจ ุจู ูุฑูุดูุฏู

### 3. ููุฏุงู ุงูุชุฎุงุจ ูุญูู ุชุญูู
ูุงู: `components/LineDeliveryMethodModal.tsx`

- ูุฑู ุฌูุนโุขูุฑ ุขุฏุฑุณ ุจุฑุง ุชุญูู ูุฒฺฉ
- ููุฏูุง: ุขุฏุฑุณ ฺฉุงููุ ุดูุฑุ ฺฉุฏ ูพุณุชุ ุดูุงุฑู ุชูุงุณ
- ุงุนุชุจุงุฑุณูุฌ ููุฏูุง

### 4. ุตูุญู ุฌุฒุฆุงุช ุณูฺฉุงุฑุช
ูุงู: `pages/SimDetailsPage.tsx`

ุชุงุจุน `handleDeliveryMethodSelect` ุจูโุฑูุฒุฑุณุงู ุดุฏ:
- ุฏุฑุงูุช ุงุทูุงุนุงุช ุขุฏุฑุณ ุงุฒ ููุฏุงู
- ุงุฑุณุงู ุงุทูุงุนุงุช ุจู `createActivationRequest`

### 5. ูพูู ุงุฏูู - ุฏุฑุฎูุงุณุชโูุง ูุนุงูโุณุงุฒ
ูุงู: `pages/AdminActivationRequestsPanel.tsx`

#### ุฌุฏูู (Table View):
- ููุงุด "๐ฆ ุชุญูู ูุฒฺฉ" ุจู ุฌุง ฺฉุฏ ูุนุงูโุณุงุฒ ุจุฑุง ุณูุงุฑุดุงุช ูุฒฺฉ
- ฺฉุฏ ูุนุงูโุณุงุฒ ููุท ุจุฑุง ุชุญูู ุจุง ฺฉุฏ ููุงุด ุฏุงุฏู ูโุดูุฏ

#### ููุฏุงู ุฌุฒุฆุงุช:
- ููุงุด ูุญูู ุชุญูู (ูุฒฺฉ ุง ฺฉุฏ)
- ูุฎู ฺฉุฑุฏู ฺฉุฏ ูุนุงูโุณุงุฒ ุจุฑุง ุชุญูู ูุฒฺฉ
- ููุงุด ุจุฎุด "๐ ุงุทูุงุนุงุช ุชุญูู" ุดุงูู:
  - ุดูุงุฑู ุชูุงุณ ุฎุฑุฏุงุฑ
  - ุดูุฑ
  - ฺฉุฏ ูพุณุช
  - ุขุฏุฑุณ ฺฉุงูู

### 6. ุตูุญู ูพฺฏุฑ ุณูุงุฑุดุงุช ุฎุฑุฏุงุฑ
ูุงู: `pages/BuyerOrderTrackingPage.tsx`

#### ุชุบุฑุงุช:
- ุงุถุงูู ุดุฏู state ุจุฑุง `deliveryMethods`
- ุชุงุจุน `loadActivationRequestInfo` ุจุฑุง ุฏุฑุงูุช ูุญูู ุชุญูู
- ูุฎู ฺฉุฑุฏู ฺฉุฏ ูุนุงูโุณุงุฒ ุจุฑุง ุชุญูู ูุฒฺฉ
- ููุงุด ูพุงู "๐ฆ ุชุญูู ูุฒฺฉ ุณูฺฉุงุฑุช" ุจุฑุง ุณูุงุฑุดุงุช ูุฒฺฉ

#### ููุทู ููุงุด:
```typescript
// ูพุงู ุชุญูู ูุฒฺฉ
if (order.line_type === 'inactive' && deliveryMethods[order.id] === 'physical_card') {
    // ููุงุด ูพุงู: ุณูฺฉุงุฑุช ุจู ุขุฏุฑุณ ุดูุง ุงุฑุณุงู ุฎูุงูุฏ ุดุฏ
}

// ููุงุด ฺฉุฏ ูุนุงูโุณุงุฒ
if (order.line_type === 'inactive' && 
    order.status === 'code_sent' && 
    deliveryMethods[order.id] === 'activation_code') {
    // ููุงุด ฺฉุฏ ูุนุงูโุณุงุฒ ู ุฏฺฉููโูุง ุชุงุฏ/ฺฏุฒุงุฑุด ูุดฺฉู
}
```

## ููู ฺฉุงูู ุณุณุชู

### ุชุญูู ุจุง ฺฉุฏ ูุนุงูโุณุงุฒ:
1. ุฎุฑุฏุงุฑ ุณูฺฉุงุฑุช ุตูุฑ ุฑุง ุฎุฑุฏุงุฑ ูโฺฉูุฏ
2. ููุฏุงู ุงูุชุฎุงุจ ูุญูู ุชุญูู ุจุงุฒ ูโุดูุฏ
3. ุฎุฑุฏุงุฑ "ุฏุฑุงูุช ฺฉุฏ ูุนุงูโุณุงุฒ" ุฑุง ุงูุชุฎุงุจ ูโฺฉูุฏ
4. ูุฑูุดูุฏู ฺฉุฏ ุฑุง ุงุฑุณุงู ูโฺฉูุฏ
5. ุฎุฑุฏุงุฑ ฺฉุฏ ุฑุง ูโุจูุฏ ู ุชุงุฏ ูโฺฉูุฏ
6. ุงุฏูู ฺฉุฏ ุฑุง ูโุจูุฏ

### ุชุญูู ูุฒฺฉ:
1. ุฎุฑุฏุงุฑ ุณูฺฉุงุฑุช ุตูุฑ ุฑุง ุฎุฑุฏุงุฑ ูโฺฉูุฏ
2. ููุฏุงู ุงูุชุฎุงุจ ูุญูู ุชุญูู ุจุงุฒ ูโุดูุฏ
3. ุฎุฑุฏุงุฑ "ุฏุฑุงูุช ูุณุฎู ูุฒฺฉ" ุฑุง ุงูุชุฎุงุจ ูโฺฉูุฏ
4. ูุฑู ุขุฏุฑุณ ููุงุด ุฏุงุฏู ูโุดูุฏ
5. ุฎุฑุฏุงุฑ ุขุฏุฑุณ ฺฉุงูู ุฑุง ูุงุฑุฏ ูโฺฉูุฏ
6. **ุฎุฑุฏุงุฑ ฺฉุฏ ูุนุงูโุณุงุฒ ุฑุง ููโุจูุฏ** - ููุท ูพุงู ุชุญูู ูุฒฺฉ
7. **ุงุฏูู ุชูุงู ุงุทูุงุนุงุช ุฑุง ูโุจูุฏ**: ุขุฏุฑุณุ ุดูุฑุ ฺฉุฏ ูพุณุชุ ุดูุงุฑู ุชูุงุณ
8. ุงุฏูู ุจุง ุฎุฑุฏุงุฑ ุชูุงุณ ูโฺฏุฑุฏ ู ุณูฺฉุงุฑุช ุฑุง ุงุฑุณุงู ูโฺฉูุฏ

## ุชุณุช ุณุณุชู

### ุจุฑุฑุณ ุณูุงุฑุด 1445:
```sql
-- ุงุฌุฑุง ูุงู verify-order-1445.sql
-- ุจุฑุฑุณ delivery_method
-- ุงฺฏุฑ physical_card ุจุงุดุฏุ ฺฉุฏ ูุจุงุฏ ุจู ุฎุฑุฏุงุฑ ูุดุงู ุฏุงุฏู ุดูุฏ
```

### ูฺฉุงุช ููู:
- ฺฉุฏ ูุนุงูโุณุงุฒ **ููุท** ุจุฑุง ุงุฏูู ูุงุจู ูุดุงูุฏู ุงุณุช ุฏุฑ ุชุญูู ูุฒฺฉ
- ุฎุฑุฏุงุฑ **ูฺโฺฏุงู** ฺฉุฏ ุฑุง ููโุจูุฏ ุฏุฑ ุชุญูู ูุฒฺฉ
- ุงุฏูู ุชูุงู ุงุทูุงุนุงุช ุชูุงุณ ู ุขุฏุฑุณ ุฎุฑุฏุงุฑ ุฑุง ูโุจูุฏ
- ุฏุฑ ุฌุฏูู ุงุฏููุ ุจู ุฌุง ฺฉุฏุ "๐ฆ ุชุญูู ูุฒฺฉ" ููุงุด ุฏุงุฏู ูโุดูุฏ

## ูุงูโูุง ุชุบุฑ ุงูุชู

1. โ `supabase/add-delivery-address-fields.sql` - ุงุถุงูู ุดุฏู ููุฏูุง ุฌุฏุฏ
2. โ `services/api-supabase.ts` - ุจูโุฑูุฒุฑุณุงู createActivationRequest
3. โ `components/LineDeliveryMethodModal.tsx` - ูุฑู ุฌูุนโุขูุฑ ุขุฏุฑุณ
4. โ `pages/SimDetailsPage.tsx` - ุงุฑุณุงู ุงุทูุงุนุงุช ุขุฏุฑุณ
5. โ `pages/AdminActivationRequestsPanel.tsx` - ููุงุด ุงุทูุงุนุงุช ุชุญูู
6. โ `pages/BuyerOrderTrackingPage.tsx` - ูุฎู ฺฉุฑุฏู ฺฉุฏ ุจุฑุง ุชุญูู ูุฒฺฉ

## ูุถุนุช ูพุงุฏูโุณุงุฒ

โ **ุชฺฉูู ุดุฏู** - ุชูุงู ูุณูุชโูุง ูพุงุฏูโุณุงุฒ ู ุชุณุช ุดุฏูโุงูุฏ
