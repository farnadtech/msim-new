# ๐ ูุฑุงุญู ูุตุจ ุณุณุชู ุงุญุฑุงุฒ ููุช (KYC)

## ุชุฑุชุจ ุตุญุญ ูุตุจ

### โ ูุฑุญูู 1: ุงุฌุงุฏ ุฌุฏูู KYC (SQL Editor)

1. ุจู Supabase Dashboard ุจุฑูุฏ
2. ุงุฒ ููู ฺูพุ "SQL Editor" ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
3. "New query" ุจุฒูุฏ
4. ูุญุชูุง ูุงู `supabase/create-kyc-verification-table.sql` ุฑุง ฺฉูพ ู ูพุณุช ฺฉูุฏ
5. "Run" ฺฉูุฏ

**ุงูุชุธุงุฑ**: ุจุงุฏ ูพุงู ููููุช ุจุจูุฏ ู ุฌุฏูู `kyc_verifications` ุงุฌุงุฏ ุดูุฏ.

---

### โ ูุฑุญูู 2: ุงูุฒูุฏู ุชูุธูุงุช (SQL Editor)

1. ุฏุฑ SQL Editorุ "New query" ุจุฒูุฏ
2. ูุญุชูุง ูุงู `supabase/add-activation-settings.sql` ุฑุง ฺฉูพ ู ูพุณุช ฺฉูุฏ
3. "Run" ฺฉูุฏ

**ุงูุชุธุงุฑ**: ุชูุธูุงุช ุฌุฏุฏ ุจู ุฌุฏูู `site_settings` ุงุถุงูู ุดููุฏ.

---

### โ ูุฑุญูู 3: ุงุฌุงุฏ Storage Bucket (Dashboard)

โ๏ธ **ููู**: ุงู ูุฑุญูู ุงุฒ Dashboard ุงูุฌุงู ูโุดูุฏุ ูู SQL Editor!

#### 3.1 ุงุฌุงุฏ Bucket

1. ุงุฒ ููู ฺูพุ "Storage" ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
2. ุฑู "New bucket" ฺฉูฺฉ ฺฉูุฏ
3. ูุฑู ุฑุง ูพุฑ ฺฉูุฏ:
   ```
   Name: kyc-documents
   Public bucket: โ (ุชฺฉ ุจุฒูุฏ)
   File size limit: 10 MB
   Allowed MIME types:
     - image/jpeg
     - image/jpg
     - image/png
     - image/webp
   ```
4. "Create bucket" ฺฉูุฏ

#### 3.2 ุชูุธู RLS Policies (SQL Editor)

1. ุจู SQL Editor ุจุฑฺฏุฑุฏุฏ
2. "New query" ุจุฒูุฏ
3. ูุญุชูุง ูุงู `supabase/create-kyc-storage-bucket.sql` ุฑุง ฺฉูพ ู ูพุณุช ฺฉูุฏ
4. "Run" ฺฉูุฏ

**ุงูุชุธุงุฑ**: 5 policy ุจุฑุง storage ุงุฌุงุฏ ุดููุฏ.

---

### โ ูุฑุญูู 4: ุจุฑุฑุณ ูุตุจ

#### ุจุฑุฑุณ ุฌุฏูู KYC:
```sql
SELECT * FROM kyc_verifications LIMIT 1;
```
**ุงูุชุธุงุฑ**: ุฌุฏูู ูุฌูุฏ ุฏุงุฑุฏ (ุญุช ุงฺฏุฑ ุฎุงู ุจุงุดุฏ)

#### ุจุฑุฑุณ ุชูุธูุงุช:
```sql
SELECT * FROM site_settings 
WHERE setting_key LIKE '%kyc%' 
   OR setting_key = 'buyer_can_receive_activation_code';
```
**ุงูุชุธุงุฑ**: 5 ุฑุฏู ุชูุธูุงุช ุฌุฏุฏ

#### ุจุฑุฑุณ Storage Bucket:
```sql
SELECT * FROM storage.buckets WHERE id = 'kyc-documents';
```
**ุงูุชุธุงุฑ**: 1 ุฑุฏู ุจุง ูุงู kyc-documents

#### ุจุฑุฑุณ Storage Policies:
```sql
SELECT policyname 
FROM pg_policies 
WHERE tablename = 'objects' 
  AND policyname LIKE '%KYC%';
```
**ุงูุชุธุงุฑ**: 5 policy

---

### โ ูุฑุญูู 5: ุชูุธูุงุช ุงููู (ุงุฒ ูพูู ุงุฏูู)

1. ูุงุฑุฏ ุณุงุช ุดูุฏ ุจุง ุญุณุงุจ ุงุฏูู
2. ุจู ุตูุญู ุชูุธูุงุช ุจุฑูุฏ
3. ุฏุณุชูโุจูุฏ "ุงุญุฑุงุฒ ููุช" ุฑุง ุจุงุฒ ฺฉูุฏ
4. ุชูุธูุงุช ุฑุง ูุนุงู ฺฉูุฏ:
   - `kyc_required` = true
   - `kyc_required_for_sellers` = true
   - `kyc_required_for_buyers` = true
5. ุฐุฎุฑู ฺฉูุฏ

6. ุฏุณุชูโุจูุฏ "ุนููู" ุฑุง ุจุงุฒ ฺฉูุฏ
7. `buyer_can_receive_activation_code` = false (ูพุดโูุฑุถ)
8. ุฐุฎุฑู ฺฉูุฏ

---

### โ ูุฑุญูู 6: ุชุณุช ุณุณุชู

#### ุชุณุช 1: ุงุญุฑุงุฒ ููุช ฺฉุงุฑุจุฑ
1. ฺฉ ุญุณุงุจ ฺฉุงุฑุจุฑ ุฌุฏุฏ ุจุณุงุฒุฏ (ุฎุฑุฏุงุฑ)
2. ุณุน ฺฉูุฏ ุณูโฺฉุงุฑุช ุฎุฑุฏุงุฑ ฺฉูุฏ
3. ุจุงุฏ ุจู ุตูุญู ุงุญุฑุงุฒ ููุช ูุฏุงุช ุดูุฏ
4. ูุฑู ุฑุง ูพุฑ ฺฉูุฏ ู ุชุตุงูุฑ ุขูพููุฏ ฺฉูุฏ
5. ุฏุฑุฎูุงุณุช ุฑุง ุงุฑุณุงู ฺฉูุฏ

**ุงูุชุธุงุฑ**: ูพุงู "ุฏุฑุฎูุงุณุช ุดูุง ุซุจุช ุดุฏ ู ุฏุฑ ุงูุชุธุงุฑ ุจุฑุฑุณ ุงุณุช"

#### ุชุณุช 2: ุชุงุฏ ุชูุณุท ุงุฏูู
1. ุจุง ุญุณุงุจ ุงุฏูู ูุงุฑุฏ ุดูุฏ
2. ุจู `/admin/kyc-management` ุจุฑูุฏ
3. ุฏุฑุฎูุงุณุช ุชุณุช ุฑุง ุจุจูุฏ
4. ุชุตุงูุฑ ุฑุง ุจุฑุฑุณ ฺฉูุฏ
5. ุฏุฑุฎูุงุณุช ุฑุง ุชุงุฏ ฺฉูุฏ

**ุงูุชุธุงุฑ**: ูุถุนุช ุจู "ุชุงุฏ ุดุฏู" ุชุบุฑ ฺฉูุฏ

#### ุชุณุช 3: ุฏุณุชุฑุณ ูพุณ ุงุฒ ุชุงุฏ
1. ุจุง ุญุณุงุจ ฺฉุงุฑุจุฑ ุชุณุช ูุงุฑุฏ ุดูุฏ
2. ุณุน ฺฉูุฏ ุณูโฺฉุงุฑุช ุฎุฑุฏุงุฑ ฺฉูุฏ
3. ุจุงุฏ ุจุชูุงูุฏ ุฎุฑุฏ ฺฉูุฏ

**ุงูุชุธุงุฑ**: ุฏุณุชุฑุณ ฺฉุงูู ุจู ุงูฺฉุงูุงุช

#### ุชุณุช 4: ฺฉูุชุฑู ุฏุฑุงูุช ฺฉุฏ ูุนุงูโุณุงุฒ
1. ุชูุธู `buyer_can_receive_activation_code` = false
2. ุณุน ฺฉูุฏ ุณูโฺฉุงุฑุช ุตูุฑ ุฎุฑุฏุงุฑ ฺฉูุฏ
3. ููุท ฺฏุฒูู "ุฏุฑุงูุช ูุฒฺฉ" ุจุงุฏ ููุงุด ุฏุงุฏู ุดูุฏ

**ุงูุชุธุงุฑ**: ฺฏุฒูู "ุฏุฑุงูุช ฺฉุฏ ูุนุงูโุณุงุฒ" ููุงุด ุฏุงุฏู ูุดูุฏ

---

## ๐ ุนุจโุงุจ

### ุฎุทุง: "must be owner of table buckets"
**ุฑุงู ุญู**: Bucket ุฑุง ุงุฒ Dashboard ุงุฌุงุฏ ฺฉูุฏุ ูู SQL Editor
**ุฑุงูููุง**: `STORAGE_BUCKET_SETUP_GUIDE.md`

### ุฎุทุง: "relation kyc_verifications does not exist"
**ุฑุงู ุญู**: ูุฑุญูู 1 ุฑุง ุงุฌุฑุง ฺฉูุฏ

### ุฎุทุง: "bucket not found"
**ุฑุงู ุญู**: ูุฑุญูู 3.1 ุฑุง ุงุฒ Dashboard ุงูุฌุงู ุฏูุฏ

### ุฎุทุง: "permission denied"
**ุฑุงู ุญู**: ูุฑุญูู 3.2 ุฑุง ุงุฌุฑุง ฺฉูุฏ (RLS Policies)

### ุชุตุงูุฑ ุขูพููุฏ ููโุดููุฏ
**ุจุฑุฑุณ**:
1. Bucket ุงุฌุงุฏ ุดุฏูุ
2. RLS Policies ุงุฌุฑุง ุดุฏูุ
3. ฺฉุงุฑุจุฑ authenticate ุดุฏูุ
4. ุญุฌู ูุงู ฺฉูุชุฑ ุงุฒ 10MB ุงุณุชุ
5. ูุฑูุช ูุงู ูุฌุงุฒ ุงุณุชุ

---

## ๐ ฺฺฉ ูุณุช ููุง

ูุจู ุงุฒ ุงุณุชูุงุฏูุ ุงู ููุงุฑุฏ ุฑุง ุจุฑุฑุณ ฺฉูุฏ:

- [ ] ุฌุฏูู `kyc_verifications` ุงุฌุงุฏ ุดุฏู
- [ ] ููุฏูุง `is_verified` ู `kyc_submitted_at` ุจู ุฌุฏูู `users` ุงุถุงูู ุดุฏู
- [ ] ุชูุธูุงุช KYC ุจู `site_settings` ุงุถุงูู ุดุฏู
- [ ] Storage Bucket `kyc-documents` ุงุฌุงุฏ ุดุฏู
- [ ] RLS Policies ุจุฑุง storage ุชูุธู ุดุฏู
- [ ] ุชูุธูุงุช ุงููู ุงุฒ ูพูู ุงุฏูู ุงูุฌุงู ุดุฏู
- [ ] ุชุณุช ุงุญุฑุงุฒ ููุช ูููู ุจูุฏู
- [ ] ุชุณุช ุชุงุฏ ุงุฏูู ูููู ุจูุฏู
- [ ] ุชุณุช ุฏุณุชุฑุณ ูพุณ ุงุฒ ุชุงุฏ ูููู ุจูุฏู
- [ ] ุชุณุช ฺฉูุชุฑู ุฏุฑุงูุช ฺฉุฏ ูุนุงูโุณุงุฒ ูููู ุจูุฏู

---

## ๐ ูุณุชูุฏุงุช ูุฑุชุจุท

- `STORAGE_BUCKET_SETUP_GUIDE.md` - ุฑุงูููุง ฺฉุงูู Storage
- `KYC_QUICK_START.md` - ุดุฑูุน ุณุฑุน
- `KYC_AND_ACTIVATION_SYSTEM_GUIDE.md` - ุฑุงูููุง ฺฉุงูู ุณุณุชู
- `KYC_DEPLOYMENT_CHECKLIST.md` - ฺฺฉ ูุณุช ุงุณุชูุฑุงุฑ
- `IMPLEMENTATION_SUMMARY_KYC.md` - ุฎูุงุตู ูพุงุฏูโุณุงุฒ

---

## โ ูพุงุงู

ูพุณ ุงุฒ ุชฺฉูู ุชูุงู ูุฑุงุญูุ ุณุณุชู ุงุญุฑุงุฒ ููุช ุดูุง ุขูุงุฏู ุงุณุชูุงุฏู ุงุณุช!

**ูููู ุจุงุดุฏ! ๐**
